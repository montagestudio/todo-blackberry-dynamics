montageDefine("15c0bd3","ui/repetition.reel/repetition",{dependencies:["../../core/core","../component","../../core/range-controller","../../core/promise","../../composer/press-composer","collections/map","collections/set","../../core/logger"],factory:function(e,t,n){var i=e("../../core/core").Montage,o=e("../component").Component,s=e("../../core/range-controller").RangeController,a=e("../../core/promise").Promise,r=e("../../composer/press-composer").PressComposer,l=e("collections/map"),d=e("collections/set"),h=e("../../core/logger").logger("repetition").color.magenta(),c=60,u=t.Iteration=i.specialize({repetition:{value:null},controller:{value:null},_object:{value:null},object:{get:function(){return this._object},set:function(e){var t;this._object!==e&&(this._object=e,t=this.repetition.contentController.selection.indexOf(e)!==-1,this._selected!==t&&(this.selected=t))}},_fragment:{value:null},_childComponents:{value:null},index:{value:null},_drawnIndex:{value:null},_active:{value:!1},active:{set:function(e){e=!!e,this.active!==e&&(this._active=e,this.repetition&&(e?this.repetition.activeIterations.add(this):this.repetition.activeIterations["delete"](this),this._updateRepetitionDirtyClassIteration()))},get:function(){return this._active}},_noTransition:{value:null},_templateDocumentPart:{value:null},isDirty:{value:!1},_selected:{value:!1},selected:{get:function(){return this._selected},set:function(e){e=!!e,this.object&&this.repetition&&this.repetition.contentController&&(e?this.repetition.contentController.selection.add(this.object):this.repetition.contentController.selection["delete"](this.object)),this._selected!==e&&(this._selected=e,this._updateRepetitionDirtyClassIteration())}},constructor:{value:function(){h.isDebug&&h.debug("Iteration:%s create iteration %O",Object.hash(this),this),this.repetition=null,this.controller=null,this.object=null,this._fragment=null,this._childComponents=null,this.index=null,this._drawnIndex=null,this._noTransition=!1,this.addOwnPropertyChangeListener("_noTransition",this),this.addPathChangeListener("index.defined() && _childComponents.defined()",this,"handleComponentModelChange"),this.cachedFirstElement=null}},_timeoutBecomeActiveID:{value:null},_shouldBecomeActive:{value:!1},shouldBecomeActive:{set:function(e){if(this._timeoutBecomeActiveID&&(clearTimeout(this._timeoutBecomeActiveID),this._timeoutBecomeActiveID=null),e){var t=this;this._shouldBecomeActive=!0,this._timeoutBecomeActiveID=setTimeout(function(){t._shouldBecomeActive&&(t.active=!0),t._shouldBecomeActive=!1},c)}else this._shouldBecomeActive=!1},get:function(){return this._shouldBecomeActive}},initWithRepetition:{value:function(e){return this.repetition=e,this}},recycle:{value:function(){this.index=null,this.object=null,this._noTransition=!0}},injectIntoDocument:{value:function(e){null!==this._drawnIndex?(h.isDebug&&h.debug("Iteration:%s retracting from index %s and injecting at %s",Object.hash(this),this._drawnIndex,e),this.retractFromDocument()):h.isDebug&&h.debug("Iteration:%s injecting at index %s",Object.hash(this),e);var t=this,n=this.repetition,i=n.element,o=n._boundaries,s=i.ownerDocument.createTextNode(""),a=o[e];if(o.splice(e,0,s),i.insertBefore(s,a),i.insertBefore(this._fragment,a),n._drawnIterations.splice(e,0,this),n._updateDrawnIndexes(e),n._addDirtyClassListIteration(this),!this._elementsWillBeAddedToMap){var r=this._childComponents.length,l=function(e){e.target.removeEventListener("firstDraw",l,!1),r--,r||t.forEachElement(function(e){n._iterationForElement.set(e,t)})};if(this._childComponents.length>0)for(var d=0;d<this._childComponents.length;d++){var c=this._childComponents[d];if(c.addEventListener("firstDraw",l,!1),c.needsDraw=!0,c._completedFirstDraw===!0)throw Error("Repetiton:%s child component %O has already drawn.",Object.hash(this),c)}else this.forEachElement(function(e){n._iterationForElement.set(e,t)});this._elementsWillBeAddedToMap=!0}}},_elementsWillBeAddedToMap:{value:!1},retractFromDocument:{value:function(){h.isDebug&&h.debug("Iteration:%s retractFromDocument drawnIndex: %s",Object.hash(this),this._drawnIndex);var e=this._drawnIndex,t=this.repetition,n=t.element,i=t._boundaries[e],o=t._boundaries[e+1];t._boundaries.splice(e,1);for(var s=this._fragment,a=i.nextSibling;a!==o;){var r=a.nextSibling;n.removeChild(a),s.appendChild(a),a=r}n.removeChild(i),this._drawnIndex=null,t._drawnIterations.splice(e,1),t._updateDrawnIndexes(e)}},handleComponentModelChange:{value:function(e){var t,n,i=this._childComponents,o=this.repetition;if(e)for(t=0,n=i.length;t<n;t++)o.addChildComponent(i[t]);else if(this._childComponents)for(t=0,n=i.length;t<n;t++)o.removeChildComponent(i[t])}},_updateRepetitionDirtyClassIteration:{value:function(){this.repetition&&(this.repetition._addDirtyClassListIteration(this),this.repetition.needsDraw=!0)}},forEachElement:{value:function(e,t){var n=this.repetition,i=this._drawnIndex;if(null!==i&&void 0!==i)for(var o=n._boundaries[i];o!==n._boundaries[i+1];o=o.nextSibling)1===o.nodeType&&e.call(t,o)}},firstElement:{get:function(){var e=this.repetition,t=this._drawnIndex;if(null!==t&&void 0!==t)for(var n=e._boundaries[t];n!==e._boundaries[t+1];n=n.nextSibling)if(1===n.nodeType)return this.cachedFirstElement=n,n}},isComponentTreeLoaded:{value:function(){return null!==this._fragment}},cachedFirstElement:{value:null}});u.prototype.handlePropertyChange=u.prototype._updateRepetitionDirtyClassIteration,t.Repetition=o.specialize({initWithContent:{value:function(e){return this.object=e,this}},initWithContentController:{value:function(e){return this.contentController=e,this}},content:{get:function(){return this.contentController?this.contentController.content:null},set:function(e){this.contentController.content=e}},_contentController:{value:null},contentController:{set:function(e){this._contentController!==e&&(this._contentController=e)},get:function(){return this._contentController||(this._contentController=new s),this._contentController}},isSelectionEnabled:{value:null},allowsMultipleSelection:{set:function(e){e=!!e,this.contentController.allowsMultipleSelection!==e&&(this.contentController.allowsMultipleSelection=e),e&&!this.isSelectionEnabled&&(this.isSelectionEnabled=!0)},get:function(){return void 0!==this.contentController&&null!==this.contentController&&this.contentController.allowsMultipleSelection}},selectedIterations:{value:null},selectedIndexes:{value:null},activeIterations:{value:null},iterations:{value:null},hasTemplate:{value:!1},_iterationTemplate:{value:null},clonesChildComponents:{value:!0},__pressComposer:{value:null},_pressComposer:{get:function(){return this.__pressComposer||(this.__pressComposer=new r,this.__pressComposer.lazyLoad=!0,this.addComposerForElement(this.__pressComposer,this.element)),this.__pressComposer}},_cancelSelectionRangeChangeListener:{value:null},_selection:{value:null},selection:{get:function(){return this._selection},set:function(e){this.contentController?(this.contentController.selection!==e&&(this.contentController.selection=e),this._selection!==this.contentController.selection&&(this._selection=this.contentController.selection),this._cancelSelectionRangeChangeListener&&this._cancelSelectionRangeChangeListener(),e?(this._cancelSelectionRangeChangeListener=this.contentController.selection.addRangeChangeListener(this,"selection"),this.handleSelectionRangeChange(e,[])):this._cancelSelectionRangeChangeListener=null):this._selection=e}},handleSelectionRangeChange:{value:function(e,t){if(this.iterations){var n,i,o,s,a,r,d=this.iterations.length;if(e.length<=1&&t.length<=1){if(t.length)for(o=t[0],a=0;a<d;a++)this.iterations[a].object===o&&(this.iterations[a].selected=!1);if(e.length)for(o=e[0],a=0;a<d;a++)this.iterations[a].object===o&&(this.iterations[a].selected=!0)}else{for(n=new l,a=0;a<d;a++)s=this.iterations[a],o=s.object,(i=n.get(o))||(i=[],n.set(o,i)),i.push(s);for(a=0;a<t.length;a++)if(i=n.get(t[a]))for(r=0;r<i.length;r++)i[r].selected=!1;for(a=0;a<e.length;a++)if(i=n.get(e[a]))for(r=0;r<i.length;r++)i[r].selected=!0}}}},_visibleIndexes:{value:null},visibleIndexes:{get:function(){return this._visibleIndexes},set:function(e){this._visibleIndexes!==e&&(this._visibleIndexes&&this._visibleIndexes.removeRangeChangeListener&&this._visibleIndexes.removeRangeChangeListener(this,"visibleIndexes"),this._visibleIndexes=e,this._visibleIndexes&&this._visibleIndexes.addRangeChangeListener&&this._visibleIndexes.addRangeChangeListener(this,"visibleIndexes"),this._updateOrganizedContent())}},handleVisibleIndexesRangeChange:{value:function(e,t,n){var i,o;if(this.__controllerOrganizedContent){for(i=[],o=0;o<e.length;o++)i.push(this.__controllerOrganizedContent[e[o]]);this.organizedContent.swap(n,t.length,i),this._isListeningToOrganizedContentChanges&&(this.handleOrganizedContentRangeChange(i.length,t.length,n),this.needsDraw=!0)}}},__controllerOrganizedContent:{value:null},_controllerOrganizedContent:{get:function(){return this.__controllerOrganizedContent},set:function(e){this.__controllerOrganizedContent!==e&&(this.__controllerOrganizedContent&&this.__controllerOrganizedContent.removeRangeChangeListener&&this.__controllerOrganizedContent.removeRangeChangeListener(this,"controllerOrganizedContent"),this.__controllerOrganizedContent=e,this.__controllerOrganizedContent&&this.__controllerOrganizedContent.addRangeChangeListener&&this.__controllerOrganizedContent.addRangeChangeListener(this,"controllerOrganizedContent"),this._updateOrganizedContent())}},handleControllerOrganizedContentRangeChange:{value:function(e,t,n){this._visibleIndexes?this._updateOrganizedContent():(this.organizedContent.swap(n,t.length,e),this._isListeningToOrganizedContentChanges&&(this.handleOrganizedContentRangeChange(e.length,t.length,n),this.needsDraw=!0))}},_updateOrganizedContent:{value:function(){var e,t;if(this.__controllerOrganizedContent)if(this._visibleIndexes){for(this.organizedContent.length>this._visibleIndexes.length&&(this.organizedContent.length=this._visibleIndexes.length,this._isListeningToOrganizedContentChanges&&this.handleOrganizedContentRangeChange(0,this.organizedContent.length-this._visibleIndexes.length,this._visibleIndexes.length)),e=this.organizedContent.length,t=0;t<this._visibleIndexes.length;t++)this.organizedContent[t]!==this.__controllerOrganizedContent[this._visibleIndexes[t]]&&(this.organizedContent[t]=this.__controllerOrganizedContent[this._visibleIndexes[t]],this._isListeningToOrganizedContentChanges&&this.handleOrganizedContentRangeChange(1,e>t?1:0,t));this._isListeningToOrganizedContentChanges&&(this.needsDraw=!0)}else e=this.organizedContent.length,this.organizedContent.swap(0,e,this.__controllerOrganizedContent),this._isListeningToOrganizedContentChanges&&(this.handleOrganizedContentRangeChange(this.__controllerOrganizedContent.length,e,0),this.needsDraw=!0);else e=this.organizedContent.length,this.organizedContent=[],this._isListeningToOrganizedContentChanges&&(this.handleOrganizedContentRangeChange(0,e,0),this.needsDraw=!0)}},constructor:{value:function(){this.contentController=null,this.organizedContent=[],this.defineBinding("_controllerOrganizedContent",{"<-":"contentController.organizedContent"}),this.isSelectionEnabled=!1,this.defineBinding("selection",{"<-":"contentController.selection"}),this.defineBinding("selectedIterations",{"<-":"iterations.filter{selected}"}),this.defineBinding("selectedIndexes",{"<-":"selectedIterations.map{index}"}),this.defineBinding("allowsMultipleSelection",{"<-":"contentController.allowsMultipleSelection"}),this._iterationTemplate=null,this.addPathChangeListener(this._setupRequirements,this,"_handleSetupRequirementsChange"),this.addPathChangeListener("innerTemplate",this,"_handleInnerTemplateChange"),this.iterations=[],this._drawnIterations=[],this._freeIterations=[],this._iterationForElement=new l,this._iterationCreationPromise=a.resolve(),this._boundaries=[],this._dirtyClassListIterations=new d,this._requestedIterations=0,this._createdIterations=0,this._canDrawInitialContent=!1,this._initialContentDrawn=!1,this.addOwnPropertyChangeListener("isSelectionEnabled",this),this._selectionPointer=null,this.activeIterations=[]}},_setupRequirements:{value:"[!_iterationTemplate.defined(),!_newDomContent.defined(),!_shouldClearDomContentOnNextDraw,_isComponentExpanded,_ownerDocumentPart.defined()].every{}"},_handleSetupRequirementsChange:{value:function(e){e&&this._setupIterationTemplate()}},_handleInnerTemplateChange:{value:function(e){this._iterationTemplate&&this._teardownIterationTemplate(),e&&this.getPath(this._setupRequirements)&&this._setupIterationTemplate()}},cleanupDeletedComponentTree:{value:function(e){var t=this._innerTemplate;this._innerTemplate=null,t&&this._teardownIterationTemplate(),e&&this.cancelBindings()}},expandComponent:{value:function(){return this._isComponentExpanded=!0,a.resolve()}},_buildIterationTemplate:{value:function(){var e,t,n,o;return e=this.innerTemplate.clone(),t=e.getSerialization(),n=t.getSerializationObject(),o=i.getInfoForObject(this).label,this._iterationLabel=o+":iteration",n[this._iterationLabel]={},e.setObjects(n),this.innerTemplate.hasParameters()&&this._expandIterationTemplateParameters(e),window._montage_le_flag&&(e.refresher=this,this._leTagIterationTemplate(e)),e}},_rebuildIterationTemplate:{value:function(){var e,t=this._iterationTemplate,n=this.iterations;this._purgeFreeIterations();for(var i,o=0;i=n[o];o++)i.isDirty=!0;this._innerTemplate=null,e=this._buildIterationTemplate(),t.replaceContentsWithTemplate(e)}},refreshTemplate:{value:function(){this._rebuildIterationTemplate()}},_isListeningToOrganizedContentChanges:{value:!1},_setupIterationTemplate:{value:function(){this._iterationTemplate=this._buildIterationTemplate();for(var e,t=this.childComponents,n=t.length-1;e=t[n--];)e.detachFromParentComponent(),e.needsDraw=!1,e.cleanupDeletedComponentTree(!0);this.handleOrganizedContentRangeChange(this.organizedContent.length,0,0),this._isListeningToOrganizedContentChanges=!0,this._canDrawInitialContent=!0,this.needsDraw=!0}},_leTagIterationTemplate:{value:function(e){var t=e.document.body;if(t.children.length>0){var n=this.ownerComponent._montage_metadata.moduleId,i=this._montage_metadata.label;this._leTagStarArgument(n,i,t)}}},_teardownIterationTemplate:{value:function(){this._isListeningToOrganizedContentChanges=!1,this.handleOrganizedContentRangeChange(0,this.organizedContent.length,0),this._purgeFreeIterations(),this._iterationTemplate=null,this._iterationForElement.clear(),this._requestedIterations=0,this._createdIterations=0,this._canDrawInitialContent=!1,this._selectionPointer=null,this.activeIterations.clear(),this._dirtyClassListIterations.clear()}},_purgeFreeIterations:{value:function(){for(var e=0;e<this._freeIterations.length;e++)for(var t=this._freeIterations[e],n=0;n<t._childComponents.length;n++){var i=t._childComponents[n];this.removeChildComponent(i),i.cleanupDeletedComponentTree(!0)}this._freeIterations.clear()}},_expandIterationTemplateParameters:{value:function(e){for(var t,n,i,o,s,a,r,l,d,h=this;e.hasParameters();){h=h.ownerComponent,t=h._ownerDocumentPart.template,o=h._ownerDocumentPart.objects,a=e.expandParameters(h),i=e.getSerialization().getExternalObjectLabels(),s=e.getInstances(),l=a.labels,n=a.labelsCollisions;for(var c,u=0;c=l[u];u++)r=n&&c in n?n[c]:c,i.indexOf(r)>=0?s[r]=o[c]:(d=t.getObjectMetadata(c),d.owner||(d.owner=o.owner),e.setObjectMetadata(r,d.require,d.label,d.owner))}}},_iterationLabel:{value:null},_iterationCreationPromise:{value:null},_createIteration:{value:function(){var e=this,t=(new this.Iteration).initWithRepetition(this);return this._iterationCreationPromise=this._iterationCreationPromise.then(function(){var n,i,o=e.element.ownerDocument;return n=e._iterationTemplate.getInstances(),n=Object.create(n),n[e._iterationLabel]=t,i=e._iterationTemplate.instantiateWithInstances(n,o).then(function(n){return n.parentDocumentPart=e._ownerDocumentPart,t._templateDocumentPart=n,n.loadComponentTree().then(function(){h.isDebug&&h.debug("Iteration:%s component tree loaded.",Object.hash(t)),t._fragment=n.fragment,t._childComponents=n.childComponents,e.constructIteration(t)}),t}),i.then(null,function(){})}),this._requestedIterations++,t}},constructIteration:{value:function(e){this._createdIterations++,this._createdIterations>=this._requestedIterations&&(this.needsDraw=!0,this._canDraw=!0)}},_controllerIterations:{value:null},_drawnIterations:{value:null},_freeIterations:{value:null},handleOrganizedContentRangeChange:{value:function(e,t,n){var i,o,s,a,r,l=n,d=this.iterations,c=Math.min(e,t),u=t-c,m=e-c,p=this.organizedContent;for(h.isDebug&&(h.debug("Repetition:%s content changed +%s@%s %O -%s %O ",Object.hash(this),e?e:0,n,t?t:0),h.debug("Repetition:%s +%s -%s iterations",Object.hash(this),m,u)),this._iterationTemplate.isDirty&&this._iterationTemplate.refresh(),a=0;a<c;a++,n++)d[n].object=p[n];if(u>0)for(i=d.splice(n,u),a=0;a<u;a++)o=i[a],o.recycle(),o.isDirty||this._freeIterations.push(o);if(h.isDebug&&(s=[]),m>0){for(;this._freeIterations.length<m;)this._freeIterations.push(this._createIteration()),h.isDebug&&s.push(this._freeIterations[this._freeIterations.length-1]);var v=new Array(m);for(a=c,r=0;a<e;a++,r++){var g=this._freeIterations.pop();h.isDebug&&(s.has(g)||h.debug("Repetition:%s reusing %s",Object.hash(this),Object.hash(g)));var f=p[l+a];g.object=f,v[r]=g}d.swap(n,0,v)}(u>0||m>0)&&this._updateIndexes(n)}},_updateIndexes:{value:function(e){for(var t=this.iterations;e<t.length;e++)t[e].index=e}},_addDirtyClassListIteration:{value:function(e){e.forEachElement(function(t){var n;t&&(n=t.component)?(n.classList[e.active?"add":"remove"]("active"),n.classList[e.selected?"add":"remove"]("selected"),n.classList.remove("no-transition")):this._dirtyClassListIterations.add(e)},this)}},canDraw:{value:function(){var e=this.canDrawGate.value;return e=e&&this._requestedIterations<=this._createdIterations,e=e&&(this._initialContentDrawn||this._canDrawInitialContent)}},_boundaries:{value:null},_dirtyClassListIterations:{value:null},_requestedIterations:{value:null},_createdIterations:{value:null},_canDrawInitialContent:{value:null},_initialContentDrawn:{value:null},draw:{value:function(){var e;for(this._initialContentDrawn||(this._drawInitialContent(),this._initialContentDrawn=!0),e=this._drawnIterations.length-1;e>=0;e--)null===this._drawnIterations[e].index&&this._drawnIterations[e].retractFromDocument();for(e=0;e<this.iterations.length;e++){var t=this.iterations[e];t._drawnIndex!==t.index&&t.isComponentTreeLoaded()&&t.injectIntoDocument(e)}var n=this._dirtyClassListIterations.toArray();this._dirtyClassListIterations.clear(),n.forEach(function(e){e.isComponentTreeLoaded()&&e.forEachElement(function(t){t.component||(t.classList[e.active?"add":"remove"]("active"),t.classList[e.selected?"add":"remove"]("selected"),t.classList.remove("no-transition"))},this)},this)}},_drawInitialContent:{value:function(){for(var e=this.element,t=e.childNodes.length,n=0;n<t;n++)e.removeChild(e.firstChild);var i=e.ownerDocument.createTextNode("");e.appendChild(i),this._boundaries.push(i)}},_updateDrawnIndexes:{value:function(e){for(var t=this._drawnIterations;e<t.length;e++)t[e]._drawnIndex=e}},_selectionPointer:{value:null},_startX:{value:0},_startY:{value:0},_currentActiveIteration:{value:null},handleIsSelectionEnabledChange:{value:function(e){e?this._enableSelectionTracking():this._disableSelectionTracking()}},_enableSelectionTracking:{value:function(){this._pressComposer.addEventListener("pressStart",this,!1)}},_disableSelectionTracking:{value:function(){this._pressComposer.removeEventListener("pressStart",this,!1)}},handlePressStart:{value:function(e){var t=this._findIterationContainingElement(e.targetElement);t&&(this._startX=e.clientX,this._startY=e.clientY,this.__pressComposer.addEventListener("press",this,!1),this.__pressComposer.addEventListener("pressCancel",this,!1),t.shouldBecomeActive=!0,this._currentActiveIteration=t)}},_ignoreSelection:{value:function(){this._currentActiveIteration&&(this._currentActiveIteration.shouldBecomeActive=!1,this._currentActiveIteration.active=!1,this._currentActiveIteration=null),this.activeIterations.clear(),this._startX=0,this._startY=0,this.__pressComposer.removeEventListener("press",this,!1),this.__pressComposer.removeEventListener("pressCancel",this,!1)}},handlePressCancel:{value:function(){this._ignoreSelection()}},handlePress:{value:function(e){var t=this._findIterationContainingElement(e.targetElement);t&&this._currentActiveIteration===t&&(t.active=!1,t.selected?this.allowsMultipleSelection&&(t.selected=!1):t.selected=!0),this._ignoreSelection()}},_findIterationContainingElement:{value:function(e){for(var t;e;){if(e===this.element)return this._iterationForElement.get(t);t=e,e=e.parentNode}}},Iteration:{value:u,serializable:!1}})}}),montageDefine("15c0bd3","composer/press-composer",{dependencies:["../core/core","./composer","../core/event/mutable-event"],factory:function(e,t,n){var i=e("../core/core").Montage,o=e("./composer").Composer,s=e("../core/event/mutable-event").MutableEvent,a=function(){function e(e){return{get:function(){return this._event[e]}}}function t(e){return{get:function(){return this._touch?this._touch[e]:this._event[e]}}}var n=s.specialize({type:{value:"press"},_event:{enumerable:!1,value:null},event:{get:function(){return this._event},set:function(e){this._event=e}},_touch:{enumerable:!1,value:null},touch:{get:function(){return this._touch},set:function(e){this._touch=e}}});return["altKey","ctrlKey","metaKey","shiftKey","cancelBubble","currentTarget","defaultPrevented","eventPhase","timeStamp","preventDefault","stopImmediatePropagation","stopPropagation"].forEach(function(t){i.defineProperty(n,t,e(t))}),["clientX","clientY","pageX","pageY","screenX","screenY","target"].forEach(function(e){i.defineProperty(n,e,t(e))}),n}(),r=t.PressComposer=o.specialize({load:{value:function(){window.PointerEvent?this._element.addEventListener("pointerdown",this,!0):window.MSPointerEvent&&window.navigator.msPointerEnabled?this._element.addEventListener("MSPointerDown",this,!0):(this._element.addEventListener("touchstart",this,!0),this._element.addEventListener("mousedown",this,!0))}},unload:{value:function(){window.PointerEvent?this._element.removeEventListener("pointerdown",this,!0):window.MSPointerEvent&&window.navigator.msPointerEnabled?this._element.removeEventListener("MSPointerDown",this,!0):(this._element.removeEventListener("touchstart",this,!0),this._element.removeEventListener("mousedown",this,!0))}},delegate:{value:null},cancelPress:{value:function(){return this._state===r.PRESSED&&(this._cancelPress(),!0)}},_cancelPress:{value:function(e){this._dispatchPressCancel(e),this._endInteraction()}},addEventListener:{value:function(e,t,n){o.prototype.addEventListener.call(this,e,t,n),"longPress"===e&&(this._shouldDispatchLongPress=!0)}},_state:{value:0},state:{get:function(){return this._state}},_shouldDispatchLongPress:{value:!1},_longPressThreshold:{value:1e3},longPressThreshold:{get:function(){return this._longPressThreshold},set:function(e){this._longPressThreshold!==e&&(this._longPressThreshold=e)}},_needDispatchSafePress:{value:!1},_longPressTimeout:{value:null},_observedPointer:{value:null},_initialCenterPositionX:{value:0},_initialCenterPositionY:{value:0},_shouldSaveInitialCenterPosition:{value:!1},_targetElementOnLastTouchMove:{value:null},_endInteraction:{value:function(){this._element&&(this._removeEventListeners(),this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this)&&this.component.eventManager.forfeitPointer(this._observedPointer,this),this._observedPointer=null,this._targetElementOnLastTouchMove=null,this._state=r.UNPRESSED,this._initialCenterPositionX=0,this._initialCenterPositionY=0,this._shouldSaveInitialCenterPosition=!1)}},_changedTouchisObserved:{value:function(e){if(null===this._observedPointer)return!1;for(var t=0,n=e.length;t<n;t++)if(e[t].identifier===this._observedPointer)return t;return!1}},surrenderPointer:{value:function(e,t){var n=this.callDelegateMethod("shouldComposerSurrenderPointerToComponent",this,e,t);return("undefined"==typeof n||n!==!1)&&(this.cancelPress(),!0)}},_shouldPerformPress:{value:function(){return!(this.component.disabled||null!==this._observedPointer)}},capturePointerdown:{value:function(e){"touch"===e.pointerType||window.MSPointerEvent&&e.pointerType===window.MSPointerEvent.MSPOINTER_TYPE_TOUCH?this.captureTouchstart(e):("mouse"===e.pointerType||window.MSPointerEvent&&e.pointerType===window.MSPointerEvent.MSPOINTER_TYPE_MOUSE)&&this.captureMousedown(e)}},handlePointerup:{value:function(e){"touch"===e.pointerType||window.MSPointerEvent&&e.pointerType===window.MSPointerEvent.MSPOINTER_TYPE_TOUCH?this.handleTouchend(e):("mouse"===e.pointerType||window.MSPointerEvent&&e.pointerType===window.MSPointerEvent.MSPOINTER_TYPE_MOUSE)&&this.handleMouseup(e)}},handlePointercancel:{value:function(e){("touch"===e.pointerType||window.MSPointerEvent&&e.pointerType===window.MSPointerEvent.MSPOINTER_TYPE_TOUCH)&&this.handleTouchcancel(e)}},captureTouchstart:{value:function(e){this._shouldPerformPress()&&(void 0!==e.pointerId?this._observedPointer=e.pointerId:e.changedTouches&&1===e.changedTouches.length&&(this._observedPointer=e.changedTouches[0].identifier),null!==this._observedPointer&&this.component.eventManager.claimPointer(this._observedPointer,this)?this._addPointerDownListener():this._observedPointer=null)}},handleTouchend:{value:function(e){if(null===this._observedPointer)return void this._endInteraction(e);var t;e.pointerId===this._observedPointer?t=e.target:this._changedTouchisObserved(e.changedTouches)!==!1&&(t=this._targetElementOnLastTouchMove||e.target),t&&this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this)&&(this.element===t||this.element.contains(t)?this._dispatchPress(e,"undefined"==typeof e.pointerId?t:null):this._dispatchPressCancel(e),this._endInteraction(e))}},_saveInitialCenterPositionIfNeeded:{value:function(){this._shouldSaveInitialCenterPosition&&(this._saveInitialCenterPosition(),this._shouldSaveInitialCenterPosition=!1)}},_cancelPressIfCenterPositionChange:{value:function(e){return this._saveInitialCenterPositionIfNeeded(),!!this._isPositionChanged(e)&&(this._cancelPress(e),!0)}},_handleMove:{value:function(e){if(null===this._observedPointer)return void this._endInteraction(e);if(this._needDispatchSafePress=!1,("mouse"===this._observedPointer||e.pointerId===this._observedPointer||e.changedTouches&&this._changedTouchisObserved(e.changedTouches)!==!1)&&this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this)&&!this._cancelPressIfCenterPositionChange(e)&&"touchmove"===e.type){var t=e.changedTouches[0];this._targetElementOnLastTouchMove=document.elementFromPoint(t.clientX,t.clientY)}}},captureWheel:{value:function(e){return null===this._observedPointer?void this._endInteraction(e):void((e.target===this.element||e.target===window||"function"==typeof e.target.contains&&e.target.contains(this.element)||this.element.contains(e.target))&&this._cancelPressIfCenterPositionChange(e))}},handleTouchcancel:{value:function(e){null!==this._observedPointer&&e.pointerId!==this._observedPointer&&this._changedTouchisObserved(e.changedTouches)===!1||(this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this)&&this._dispatchPressCancel(e),this._endInteraction(e))}},captureMousedown:{value:function(e){0===e.button&&this._shouldPerformPress()&&(this._observedPointer="mouse",this.component.eventManager.claimPointer(this._observedPointer,this),this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this)?this._addPointerDownListener():this._observedPointer=null)}},_handlePointerDown:{value:function(e){if(this._removePointerDownListener(),this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this)){if(this._needDispatchSafePress=!1,"touchstart"===e.type){var t=this;window.nativeAddEventListener("touchstart",function n(e){window.nativeRemoveEventListener("touchstart",n,!1),t._needDispatchSafePress=!e.defaultPrevented},!1)}this._shouldSaveInitialCenterPosition=!0,this._addEventListeners(),this._dispatchPressStart(e)}else this._observedPointer=null}},captureScroll:{value:function(e){(e.target===this.element||e.target===window||"function"==typeof e.target.contains&&e.target.contains(this.element)||this.element.contains(e.target))&&this._cancelPressIfCenterPositionChange(e)}},handleMouseup:{value:function(e){if(null===this._observedPointer)return void this._endInteraction(e);if(this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this)){for(var t=e.target;t!==this._element&&t&&t.parentNode;)t=t.parentNode;if(t===this._element)return this._dispatchPress(e),void this._endInteraction(e)}this._cancelPress(e)}},handleDragstart:{value:function(e){this._cancelPress(e)}},_saveInitialCenterPosition:{value:function(){if(this.element instanceof HTMLElement){var e=this.element.getBoundingClientRect();this._initialCenterPositionX=e.left+e.width/2,this._initialCenterPositionY=e.top+e.height/2}}},_isPositionChanged:{value:function(e){if(this.element instanceof HTMLElement){var t=this.element.getBoundingClientRect(),n=t.left+t.width/2,i=t.top+t.height/2;if(this._initialCenterPositionX!==n||this._initialCenterPositionY!==i){var s=e.type,a=Math.abs(this._initialCenterPositionX-n),r=Math.abs(this._initialCenterPositionY-i),l="mouse"===this._observedPointer||"wheel"===s||"mousewheel"===s||"scroll"===s?this._mouseRadiusThreshold:this._touchRadiusThreshold;return o.isCoordinateOutsideRadius(a,r,l)}}return!1}},_mouseRadiusThreshold:{value:2},_touchRadiusThreshold:{value:4},_addPointerDownListener:{value:function(){window.PointerEvent?this._element.addEventListener("pointerdown",this,!1):window.MSPointerEvent&&window.navigator.msPointerEnabled?this._element.addEventListener("MSPointerDown",this,!1):"mouse"===this._observedPointer?this._element.addEventListener("mousedown",this,!1):this._element.addEventListener("touchstart",this,!1)}},_removePointerDownListener:{value:function(){window.PointerEvent?this._element.removeEventListener("pointerdown",this,!1):window.MSPointerEvent&&window.navigator.msPointerEnabled?this._element.removeEventListener("MSPointerDown",this,!1):"mouse"===this._observedPointer?this._element.removeEventListener("mousedown",this,!1):this._element.removeEventListener("touchstart",this,!1)}},_addEventListeners:{value:function(){window.PointerEvent?(this.shawdowRoot&&(this.shawdowRoot.addEventListener("pointerup",this,!1),this.shawdowRoot.addEventListener("pointermove",this,!1),this.shawdowRoot.addEventListener("pointercancel",this,!1)),document.addEventListener("pointerup",this,!1),document.addEventListener("pointermove",this,!1),document.addEventListener("pointercancel",this,!1)):window.MSPointerEvent&&window.navigator.msPointerEnabled?(this.shawdowRoot&&(this.shawdowRoot.addEventListener("MSPointerUp",this,!1),this.shawdowRoot.addEventListener("MSPointerMove",this,!1),this.shawdowRoot.addEventListener("MSPointerCancel",this,!1)),document.addEventListener("MSPointerUp",this,!1),document.addEventListener("MSPointerMove",this,!1),document.addEventListener("MSPointerCancel",this,!1)):"mouse"===this._observedPointer?(this.shawdowRoot&&(this.shawdowRoot.addEventListener("mouseup",this,!1),this.shawdowRoot.addEventListener("mousemove",this,!1),this.shawdowRoot.addEventListener("dragstart",this,!1)),document.addEventListener("mouseup",this,!1),document.addEventListener("mousemove",this,!1),this._element.addEventListener("dragstart",this,!1)):(this.shawdowRoot&&(this.shawdowRoot.addEventListener("touchend",this,!1),this.shawdowRoot.addEventListener("touchcancel",this,!1),this.shawdowRoot.addEventListener("touchmove",this,!1)),document.addEventListener("touchend",this,!1),document.addEventListener("touchcancel",this,!1),document.addEventListener("touchmove",this,!1));var e="undefined"!=typeof window.onwheel||"undefined"!=typeof window.WheelEvent?"wheel":"mousewheel";
this.shawdowRoot&&(this.shawdowRoot.addEventListener(e,this,!0),this.shawdowRoot.addEventListener("scroll",this,!0)),document.addEventListener(e,this,!0),document.addEventListener("scroll",this,!0)}},_removeEventListeners:{value:function(){window.PointerEvent?(this.shawdowRoot&&(this.shawdowRoot.removeEventListener("pointerup",this,!1),this.shawdowRoot.removeEventListener("pointermove",this,!1),this.shawdowRoot.removeEventListener("pointercancel",this,!1)),document.removeEventListener("pointerup",this,!1),document.removeEventListener("pointermove",this,!1),document.removeEventListener("pointercancel",this,!1)):window.MSPointerEvent&&window.navigator.msPointerEnabled?(this.shawdowRoot&&(this.shawdowRoot.removeEventListener("MSPointerUp",this,!1),this.shawdowRoot.removeEventListener("MSPointerMove",this,!1),this.shawdowRoot.removeEventListener("MSPointerCancel",this,!1)),document.removeEventListener("MSPointerUp",this,!1),document.removeEventListener("MSPointerMove",this,!1),document.removeEventListener("MSPointerCancel",this,!1)):"mouse"===this._observedPointer?(this.shawdowRoot&&(this.shawdowRoot.removeEventListener("mouseup",this,!1),this.shawdowRoot.removeEventListener("mousemove",this,!1),this.shawdowRoot.removeEventListener("dragstart",this,!1)),document.removeEventListener("mouseup",this,!1),document.removeEventListener("mousemove",this,!1),this._element.removeEventListener("dragstart",this,!1)):(this.shawdowRoot&&(this.shawdowRoot.removeEventListener("touchend",this,!1),this.shawdowRoot.removeEventListener("touchcancel",this,!1),this.shawdowRoot.removeEventListener("touchmove",this,!1)),document.removeEventListener("touchend",this,!1),document.removeEventListener("touchcancel",this,!1),document.removeEventListener("touchmove",this,!1));var e="undefined"!=typeof window.onwheel||"undefined"!=typeof window.WheelEvent?"wheel":"mousewheel";this.shawdowRoot&&(this.shawdowRoot.removeEventListener(e,this,!0),this.shawdowRoot.removeEventListener("scroll",this,!0)),document.removeEventListener(e,this,!0),document.removeEventListener("scroll",this,!0)}},_createPressEvent:{enumerable:!1,value:function(e,t){var n,i,o=t;return t||(t=document.createEvent("CustomEvent"),t.initCustomEvent(e,!0,!0,null)),n=new a,n.event=t,n.type=e,n.pointer=this._observedPointer,n.targetElement=t.target,t.changedTouches&&(i=this._changedTouchisObserved(t.changedTouches))!==!1&&(o=n.touch=t.changedTouches[i]),o&&(n.clientX=o.clientX,n.clientY=o.clientY,n.pageX=o.pageX,n.pageY=o.pageY),n}},_dispatchPressStart:{enumerable:!1,value:function(e){if(this._state=r.PRESSED,this.dispatchEvent(this._createPressEvent("pressStart",e)),this._shouldDispatchLongPress){var t=this;this._longPressTimeout=setTimeout(function(){t._dispatchLongPress(e.target)},this._longPressThreshold)}}},_dispatchPress:{enumerable:!1,value:function(e,t){this._shouldDispatchLongPress&&(clearTimeout(this._longPressTimeout),this._longPressTimeout=null);var n=this._createPressEvent("press",e);if(t&&(n.targetElement=t,this._needDispatchSafePress||e.defaultPrevented)){var i=this,o=document.defaultView.defaultEventManager,s=function(a){(t===a.target||o._couldEmulatedEventHaveWrongTarget(e.changedTouches[0],a,o._emulatedEventRadiusThreshold,o._emulatedEventTimestampThreshold))&&i._dispatchSafePress(n,s)};return window.nativeAddEventListener("mousedown",s,!0),void(s.timeoutID=setTimeout(function(){i._dispatchSafePress(n,s)},300))}this.dispatchEvent(n),this._state=r.UNPRESSED}},_dispatchSafePress:{value:function(e,t){clearTimeout(t.timeoutID),t.timeoutID=null,window.nativeRemoveEventListener("mousedown",t,!0),this.dispatchEvent(e),this._state=r.UNPRESSED}},_dispatchLongPress:{enumerable:!1,value:function(e){var t;this._shouldDispatchLongPress&&(t=this._createPressEvent("longPress"),t.targetElement=e,this.dispatchEvent(t),this._longPressTimeout=null)}},_dispatchPressCancel:{enumerable:!1,value:function(e){this._shouldDispatchLongPress&&(clearTimeout(this._longPressTimeout),this._longPressTimeout=null),this._state=r.CANCELLED,this.dispatchEvent(this._createPressEvent("pressCancel",e))}}},{UNPRESSED:{value:0},PRESSED:{value:1},CANCELLED:{value:2}});r.prototype.captureMSPointerDown=r.prototype.capturePointerdown,r.prototype.handleMSPointerUp=r.prototype.handlePointerup,r.prototype.handleMSPointerCancel=r.prototype.handlePointercancel,r.prototype.handleMSPointerMove=r.prototype._handleMove,r.prototype.handlePointermove=r.prototype._handleMove,r.prototype.handleTouchmove=r.prototype._handleMove,r.prototype.handleMousemove=r.prototype._handleMove,r.prototype.handleMousewheel=r.prototype.handleWheel,r.prototype.handleMSPointerDown=r.prototype._handlePointerDown,r.prototype.handlePointerdown=r.prototype._handlePointerDown,r.prototype.handleMousedown=r.prototype._handlePointerDown,r.prototype.handleTouchstart=r.prototype._handlePointerDown}}),montageDefine("a5e4c02","ui/todo-list.reel/todo-list.html",{text:'<!DOCTYPE html><html><head><style>.todo-list{margin-top:70px;height:calc(100% - 70px);overflow:auto}.todo-list.pending .cssload-loader-list{display:block}.cssload-loader-list{z-index:99;display:none;left:50%;width:90.284271247462px;height:90.284271247462px;margin-left:-45.142135623731px;margin-top:45.142135623731px;border-radius:100%;animation-name:cssload-loader-list;-o-animation-name:cssload-loader-list;-ms-animation-name:cssload-loader-list;-webkit-animation-name:cssload-loader-list;-moz-animation-name:cssload-loader-list;animation-timing-function:linear;-o-animation-timing-function:linear;-ms-animation-timing-function:linear;-webkit-animation-timing-function:linear;-moz-animation-timing-function:linear;animation-duration:4.6s;-o-animation-duration:4.6s;-ms-animation-duration:4.6s;-webkit-animation-duration:4.6s;-moz-animation-duration:4.6s}.cssload-loader-list,.cssload-loader-list .cssload-side{position:absolute;animation-iteration-count:infinite;-o-animation-iteration-count:infinite;-ms-animation-iteration-count:infinite;-webkit-animation-iteration-count:infinite;-moz-animation-iteration-count:infinite}.cssload-loader-list .cssload-side{display:block;width:11px;height:38px;background-color:#3273dc;margin:4px;border-radius:50%;animation-duration:1.73s;-o-animation-duration:1.73s;-ms-animation-duration:1.73s;-webkit-animation-duration:1.73s;-moz-animation-duration:1.73s;animation-timing-function:ease;-o-animation-timing-function:ease;-ms-animation-timing-function:ease;-webkit-animation-timing-function:ease;-moz-animation-timing-function:ease}.cssload-loader-list .cssload-side:nth-child(1),.cssload-loader-list .cssload-side:nth-child(5){transform:rotate(0deg);-o-transform:rotate(0deg);-ms-transform:rotate(0deg);-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);animation-name:cssload-rotate0;-o-animation-name:cssload-rotate0;-ms-animation-name:cssload-rotate0;-webkit-animation-name:cssload-rotate0;-moz-animation-name:cssload-rotate0}.cssload-loader-list .cssload-side:nth-child(3),.cssload-loader-list .cssload-side:nth-child(7){transform:rotate(90deg);-o-transform:rotate(90deg);-ms-transform:rotate(90deg);-webkit-transform:rotate(90deg);-moz-transform:rotate(90deg);animation-name:cssload-rotate90;-o-animation-name:cssload-rotate90;-ms-animation-name:cssload-rotate90;-webkit-animation-name:cssload-rotate90;-moz-animation-name:cssload-rotate90}.cssload-loader-list .cssload-side:nth-child(2),.cssload-loader-list .cssload-side:nth-child(6){transform:rotate(45deg);-o-transform:rotate(45deg);-ms-transform:rotate(45deg);-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);animation-name:cssload-rotate45;-o-animation-name:cssload-rotate45;-ms-animation-name:cssload-rotate45;-webkit-animation-name:cssload-rotate45;-moz-animation-name:cssload-rotate45}.cssload-loader-list .cssload-side:nth-child(4),.cssload-loader-list .cssload-side:nth-child(8){transform:rotate(135deg);-o-transform:rotate(135deg);-ms-transform:rotate(135deg);-webkit-transform:rotate(135deg);-moz-transform:rotate(135deg);animation-name:cssload-rotate135;-o-animation-name:cssload-rotate135;-ms-animation-name:cssload-rotate135;-webkit-animation-name:cssload-rotate135;-moz-animation-name:cssload-rotate135}.cssload-loader-list .cssload-side:nth-child(1){top:45.142135623731px;left:90.284271247462px}.cssload-loader-list .cssload-side:nth-child(1),.cssload-loader-list .cssload-side:nth-child(2){margin-left:-6px;margin-top:-19px;animation-delay:0;-o-animation-delay:0;-ms-animation-delay:0;-webkit-animation-delay:0;-moz-animation-delay:0}.cssload-loader-list .cssload-side:nth-child(2){top:77.213203431093px;left:77.213203431093px}.cssload-loader-list .cssload-side:nth-child(3){top:90.284271247462px;left:45.142135623731px}.cssload-loader-list .cssload-side:nth-child(3),.cssload-loader-list .cssload-side:nth-child(4){margin-left:-6px;margin-top:-19px;animation-delay:0;-o-animation-delay:0;-ms-animation-delay:0;-webkit-animation-delay:0;-moz-animation-delay:0}.cssload-loader-list .cssload-side:nth-child(4){top:77.213203431093px;left:13.071067816369px}.cssload-loader-list .cssload-side:nth-child(5){top:45.142135623731px;left:0}.cssload-loader-list .cssload-side:nth-child(5),.cssload-loader-list .cssload-side:nth-child(6){margin-left:-6px;margin-top:-19px;animation-delay:0;-o-animation-delay:0;-ms-animation-delay:0;-webkit-animation-delay:0;-moz-animation-delay:0}.cssload-loader-list .cssload-side:nth-child(6){top:13.071067816369px;left:13.071067816369px}.cssload-loader-list .cssload-side:nth-child(7){top:0;left:45.142135623731px}.cssload-loader-list .cssload-side:nth-child(7),.cssload-loader-list .cssload-side:nth-child(8){margin-left:-6px;margin-top:-19px;animation-delay:0;-o-animation-delay:0;-ms-animation-delay:0;-webkit-animation-delay:0;-moz-animation-delay:0}.cssload-loader-list .cssload-side:nth-child(8){top:13.071067816369px;left:77.213203431093px}@keyframes cssload-rotate0{0%{transform:rotate(0deg)}60%,100%{transform:rotate(180deg)}}@-o-keyframes cssload-rotate0{0%{-o-transform:rotate(0deg)}60%,100%{-o-transform:rotate(180deg)}}@-ms-keyframes cssload-rotate0{0%{-ms-transform:rotate(0deg)}60%,100%{-ms-transform:rotate(180deg)}}@-webkit-keyframes cssload-rotate0{0%{-webkit-transform:rotate(0deg)}60%,100%{-webkit-transform:rotate(180deg)}}@-moz-keyframes cssload-rotate0{0%{-moz-transform:rotate(0deg)}60%,100%{-moz-transform:rotate(180deg)}}@keyframes cssload-rotate90{0%{transform:rotate(90deg)}60%,100%{transform:rotate(270deg)}}@-o-keyframes cssload-rotate90{0%{-o-transform:rotate(90deg);transform:rotate(90deg)}60%,100%{-o-transform:rotate(270deg);transform:rotate(270deg)}}@-ms-keyframes cssload-rotate90{0%{-ms-transform:rotate(90deg);transform:rotate(90deg)}60%,100%{-ms-transform:rotate(270deg);transform:rotate(270deg)}}@-webkit-keyframes cssload-rotate90{0%{-webkit-transform:rotate(90deg);transform:rotate(90deg)}60%,100%{-webkit-transform:rotate(270deg);transform:rotate(270deg)}}@-moz-keyframes cssload-rotate90{0%{-moz-transform:rotate(90deg);transform:rotate(90deg)}60%,100%{-moz-transform:rotate(270deg);transform:rotate(270deg)}}@keyframes cssload-rotate45{0%{transform:rotate(45deg)}60%,100%{transform:rotate(225deg)}}@-o-keyframes cssload-rotate45{0%{-o-transform:rotate(45deg);transform:rotate(45deg)}60%,100%{-o-transform:rotate(225deg);transform:rotate(225deg)}}@-ms-keyframes cssload-rotate45{0%{-ms-transform:rotate(45deg);transform:rotate(45deg)}60%,100%{-ms-transform:rotate(225deg);transform:rotate(225deg)}}@-webkit-keyframes cssload-rotate45{0%{-webkit-transform:rotate(45deg);transform:rotate(45deg)}60%,100%{-webkit-transform:rotate(225deg);transform:rotate(225deg)}}@-moz-keyframes cssload-rotate45{0%{-moz-transform:rotate(45deg);transform:rotate(45deg)}60%,100%{-moz-transform:rotate(225deg);transform:rotate(225deg)}}@keyframes cssload-rotate135{0%{transform:rotate(135deg)}60%,100%{transform:rotate(315deg)}}@-o-keyframes cssload-rotate135{0%{-o-transform:rotate(135deg);transform:rotate(135deg)}60%,100%{-o-transform:rotate(315deg);transform:rotate(315deg)}}@-ms-keyframes cssload-rotate135{0%{-ms-transform:rotate(135deg);transform:rotate(135deg)}60%,100%{-ms-transform:rotate(315deg);transform:rotate(315deg)}}@-webkit-keyframes cssload-rotate135{0%{-webkit-transform:rotate(135deg);transform:rotate(135deg)}60%,100%{-webkit-transform:rotate(315deg);transform:rotate(315deg)}}@-moz-keyframes cssload-rotate135{0%{-moz-transform:rotate(135deg);transform:rotate(135deg)}60%,100%{-moz-transform:rotate(315deg);transform:rotate(315deg)}}@keyframes cssload-loader-list{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@-o-keyframes cssload-loader-list{0%{-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@-ms-keyframes cssload-loader-list{0%{-ms-transform:rotate(0deg);transform:rotate(0deg)}100%{-ms-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes cssload-loader-list{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes cssload-loader-list{0%{-moz-transform:rotate(0deg);transform:rotate(0deg)}100%{-moz-transform:rotate(360deg);transform:rotate(360deg)}}</style><script type=text/montage-serialization>{"owner":{"values":{"element":{"#":"owner"},"classList.has(\'pending\')":{"<-":"@owner.actionPending"}}},"list":{"prototype":"montage/ui/repetition.reel","values":{"element":{"#":"list"},"content":{"<-":"@owner.todos"}}},"todoItem":{"prototype":"ui/todo-item.reel","values":{"element":{"#":"todo-item"},"todo":{"<-":"@list:iteration.object"}}}}</script></head><body><div data-montage-id=owner class=todo-list><ul data-montage-id=list class=list><li class=list-item data-montage-id=todo-item></li></ul><div class=cssload-loader-list><div class=cssload-side></div><div class=cssload-side></div><div class=cssload-side></div><div class=cssload-side></div><div class=cssload-side></div><div class=cssload-side></div><div class=cssload-side></div><div class=cssload-side></div></div></div></body></html>'}),montageDefine("15c0bd3","core/range-controller",{dependencies:["./core","collections/generic-collection","collections/listen/array-changes","core/deprecate","./core","./core","./core","./core"],factory:function(e,t,n){var i=e("./core").Montage,o=e("collections/generic-collection"),s=e("collections/listen/array-changes").observableArrayProperties,a=e("core/deprecate"),r=Object.freeze([]),l=function(e,t){var n=e;return n.__proto__=l.prototype,n.rangeController=t,n.contentEquals=e&&e.contentEquals||Object.is,n};l.prototype=Object.create(Array.prototype,s),Object.defineProperty(l.prototype,"clone",{value:function(){return this.slice()}}),l.prototype.oldSwap=s.swap.value,Object.defineProperty(l.prototype,"swap",{configurable:!1,value:function(e,t,n){return this.swap_or_push(e,t,n)}}),l.prototype.oldPush=s.push.value,Object.defineProperty(l.prototype,"push",{configurable:!1,value:function(){for(var e=-1,t=arguments.length,n=Array(t);++e<t;)n[e]=arguments[e];this.swap_or_push(this.length,0,n)}}),Object.defineProperty(l.prototype,"swap_or_push",{configurable:!1,value:function(e,t,n){var i=this.rangeController.content;this.contentEquals=i&&i.contentEquals||Object.is,e=e>=0?e:this.length+e;var o,s=this.length,a=Math.min(t,s-e);n?(n.contentEquals=this.contentEquals,o=n.filter(function(t,o){if(i&&!i.has(t))return!1;if(n.findLast(t)>o)return!1;var s=this.find(t);return s<0||s>=e&&s<e+a},this)):o=r;var l;l=0===a?r:Array.prototype.slice.call(this,e,e+a);var d=o.length-l.length,h=Math.max(this.length+d,e+o.length);if(!this.rangeController.allowsMultipleSelection&&h>1){var c=o.length?o[o.length-1]:this.one();return 0===s?(this.oldPush(c),r):this.oldSwap(0,s,[c])}return this.rangeController.avoidsEmptySelection&&0===h?i.has(this[0])?this.length-1===0?r:this.oldSwap(1,this.length-1):0===this.length?(this.oldPush(i.one()),r):this.oldSwap(0,this.length,[i.one()]):this.oldSwap(e,t,o)}}),t.RangeController=i.specialize({constructor:{value:function(e){this.content=null,this._selection=new l([],this),this.sortPath=null,this.filterPath=null,this.reversed=!1,this.selectAddedContent=!1,this.deselectInvisibleContent=!1,this.clearSelectionOnOrderChange=!1,this.avoidsEmptySelection=!1,this.organizedContent=[],this.organizedContent.addRangeChangeListener(this,"organizedContent"),this.defineBinding("_filteredContent",{"<-":"$filterPath.defined() ? content.filter{path($filterPath)} : content"}),this.defineBinding("_sortedContent",{"<-":"$sortPath.defined() ? _filteredContent.sorted{path($sortPath)} : _filteredContent"}),this.defineBinding("organizedContent.rangeContent()",{"<-":"$reversed ?? 0 ? _sortedContent.reversed() : _sortedContent"}),this.addRangeAtPathChangeListener("content",this,"handleContentRangeChange"),this.addPathChangeListener("sortPath",this,"handleOrderChange"),this.addPathChangeListener("reversed",this,"handleOrderChange"),this.addOwnPropertyChangeListener("allowsMultipleSelection",this),this.iterations=[],e&&this.initWithContent(e)}},initWithContent:{value:function(e){return this.content=e,this}},sortPath:{value:null},reversed:{value:null},filterPath:{value:null},selectAddedContent:{value:!1},deselectInvisibleContent:{value:!1},clearSelectionOnOrderChange:{value:!1},avoidsEmptySelection:{value:!1},allowsMultipleSelection:{value:!1},multiSelect:{set:function(e){a.deprecationWarning("multiSelect","allowsMultipleSelection"),this.allowsMultipleSelection=!!e},get:function(){return a.deprecationWarning("multiSelect","allowsMultipleSelection"),this.allowsMultipleSelection}},organizedContent:{value:null},iterations:{value:null},_selection:{value:null},selection:{get:function(){return this._selection},set:function(e){var t=[0,this._selection.length];e&&e.toArray&&(t=t.concat(e.toArray())),this._selection.splice.apply(this._selection,t)}},select:{value:function(e){!this.allowsMultipleSelection&&this.selection.length>=1&&this.selection.clear(),this.selection.add(e)}},deselect:{value:function(e){(!this.avoidsEmptySelection||this.selection.length>1)&&this.selection["delete"](e)}},clearSelection:{value:function(){(!this.avoidsEmptySelection||this.selection.length>1)&&this.selection.clear()}},add:{value:function(e){var t;return this.content||(this.content=[]),t=this.content.add(e),t&&this.handleAdd(e),t}},push:{value:function(){for(var e=this.content.push.apply(this.content,arguments),t=0;t<arguments.length;t++)this.handleAdd(arguments[t]);return e}},pop:{value:function(){return this.content.pop()}},shift:{value:function(){return this.content.shift()}},unshift:{value:function(){for(var e=this.content.unshift.apply(this.content,arguments),t=0;t<arguments.length;t++)this.handleAdd(arguments[t]);return e}},splice:{value:function(){for(var e=this.content.splice.apply(this.content,arguments),t=2;t<arguments.length;t++)this.handleAdd(arguments[t]);return e}},swap:{value:function(e,t,n){var i=this.content.swap.apply(this.content,arguments);if(n)for(e=2;e<n.length;e++)this.handleAdd(n[e]);return i}},"delete":{value:function(e){return this.content["delete"](e)}},has:{value:function(e){return!!this.content&&this.content.has(e)}},addEach:{value:o.prototype.addEach},deleteEach:{value:o.prototype.deleteEach},clear:{value:function(){this.content.clear()}},addContent:{value:function(){var e=new this.contentConstructor;return this.add(e),e}},_contentConstructor:{value:null},contentConstructor:{get:function(){return this._contentConstructor?this._contentConstructor:this.content&&this.content.contentConstructor?this.content.contentConstructor:Object},set:function(e){this._contentConstructor=e}},handleContentRangeChange:{value:function(e,t,n){if(this.selection.length>0){var i=this.content&&this.content.contentEquals||Object.is;t.deleteEach(e,i),this.selection.length&&(this.selection.deleteEach(t),0===this.selection.length&&this.content&&this.content.length&&this.avoidsEmptySelection&&!this.allowsMultipleSelection&&this.selection.add(this.content[this.content.length-1]))}}},handleSelectionRangeChange:{value:function(e,t,n){if(this.selection)if(this.content){for(var i=[],o=0;o<e.length;o++)this.content.has(e[o])||i.push(e[o]);if(this._selection.deleteEach(i),!this.allowsMultipleSelection&&this._selection.length>1){var s=this._selection.pop();this._selection.clear(),this._selection.add(s)}this.avoidsEmptySelection&&0===this._selection.length&&this._selection.add(t[0])}else this._selection.clear()}},handleOrganizedContentRangeChange:{value:function(e,t,n){if(this.deselectInvisibleContent&&this.selection){var i=t.clone(1);i.deleteEach(e),this.selection.deleteEach(t)}}},handleOrderChange:{value:function(){this.clearSelectionOnOrderChange&&this.selection&&this.selection.clear()}},handleAdd:{value:function(e){this.selectAddedContent&&this.selection&&(!this.allowsMultipleSelection&&this.selection.length?this.selection.swap(0,this.selection.length,[e]):this.selection.add(e))}},handleAllowsMultipleSelectionChange:{value:function(){if(this.selection){var e=this.selection.length;if(!this.allowsMultipleSelection&&e>1){var t=this._selection.pop();this._selection.clear(),this._selection.add(t)}}}}},{objectDescriptorModuleId:e("./core")._objectDescriptorModuleIdDescriptor,objectDescriptor:e("./core")._objectDescriptorDescriptor,blueprintModuleId:e("./core")._blueprintModuleIdDescriptor,blueprint:e("./core")._blueprintDescriptor})}}),montageDefine("a5e4c02","ui/todo-item.reel/todo-item.html",{text:'<!DOCTYPE html><html><head><style>.todo-item{padding:1rem;min-height:70px;background:#fff}.todo-item.pending .todo-item-container{display:none}.todo-item.pending .cssload-container{display:block}.todo-item-container{display:flex}.b-checkbox{flex:1}.b-checkbox label{padding-left:1rem!important;flex:1;pointer-events:none}.todo-item.done .b-checkbox{opacity:.75}.todo-item.done label{text-decoration:line-through}.todo-item+.todo-item{border-top:1px solid #ECECEC}.todo-item:last-of-type{border-bottom:1px solid #ECECEC}.b-checkbox label:before{width:20px!important;height:20px!important;top:2px!important}.b-checkbox label:after{top:4px!important;font-size:14px!important}.cssload-container{display:none;margin:7px auto;width:75px}.cssload-loading i{width:15px;height:15px;display:inline-block;border-radius:50%;background:#3273dc}.cssload-loading i:first-child{opacity:0;animation:cssload-loading-ani2 .58s linear infinite;-o-animation:cssload-loading-ani2 .58s linear infinite;-ms-animation:cssload-loading-ani2 .58s linear infinite;-webkit-animation:cssload-loading-ani2 .58s linear infinite;-moz-animation:cssload-loading-ani2 .58s linear infinite;transform:translate(-15px);-o-transform:translate(-15px);-ms-transform:translate(-15px);-webkit-transform:translate(-15px);-moz-transform:translate(-15px)}.cssload-loading i:nth-child(2),.cssload-loading i:nth-child(3){animation:cssload-loading-ani3 .58s linear infinite;-o-animation:cssload-loading-ani3 .58s linear infinite;-ms-animation:cssload-loading-ani3 .58s linear infinite;-webkit-animation:cssload-loading-ani3 .58s linear infinite;-moz-animation:cssload-loading-ani3 .58s linear infinite}.cssload-loading i:last-child{animation:cssload-loading-ani1 .58s linear infinite;-o-animation:cssload-loading-ani1 .58s linear infinite;-ms-animation:cssload-loading-ani1 .58s linear infinite;-webkit-animation:cssload-loading-ani1 .58s linear infinite;-moz-animation:cssload-loading-ani1 .58s linear infinite}@keyframes cssload-loading-ani1{100%{transform:translate(30px);opacity:0}}@-o-keyframes cssload-loading-ani1{100%{-o-transform:translate(30px);opacity:0}}@-ms-keyframes cssload-loading-ani1{100%{-ms-transform:translate(30px);opacity:0}}@-webkit-keyframes cssload-loading-ani1{100%{-webkit-transform:translate(30px);opacity:0}}@-moz-keyframes cssload-loading-ani1{100%{-moz-transform:translate(30px);opacity:0}}@keyframes cssload-loading-ani2{100%{transform:translate(15px);opacity:1}}@-o-keyframes cssload-loading-ani2{100%{-o-transform:translate(15px);opacity:1}}@-ms-keyframes cssload-loading-ani2{100%{-ms-transform:translate(15px);opacity:1}}@-webkit-keyframes cssload-loading-ani2{100%{-webkit-transform:translate(15px);opacity:1}}@-moz-keyframes cssload-loading-ani2{100%{-moz-transform:translate(15px);opacity:1}}@keyframes cssload-loading-ani3{100%{transform:translate(15px)}}@-o-keyframes cssload-loading-ani3{100%{-o-transform:translate(15px)}}@-ms-keyframes cssload-loading-ani3{100%{-ms-transform:translate(15px)}}@-webkit-keyframes cssload-loading-ani3{100%{-webkit-transform:translate(15px)}}@-moz-keyframes cssload-loading-ani3{100%{-moz-transform:translate(15px)}}</style><script type=text/montage-serialization>{"owner":{"values":{"element":{"#":"owner"},"checkboxElement":{"#":"checkbox"},"labelElement":{"#":"label"},"classList.has(\'done\')":{"<-":"@owner.todo.done"},"classList.has(\'pending\')":{"<-":"@owner.actionPending"}},"listeners":[{"type":"action","listener":{"@":"owner"},"capture":false}]},"checkbox":{"prototype":"montage/ui/checkbox.reel","values":{"element":{"#":"checkbox"},"checked":{"<-":"@owner.todo.done"},"detail.get(\'todo\')":{"<-":"@owner.todo"},"disabled":{"<-":"@owner.actionPending"}}},"label":{"prototype":"montage/ui/text.reel","values":{"element":{"#":"label"},"value":{"<-":"@owner.todo.label"}}},"delete":{"prototype":"montage/ui/button.reel","values":{"element":{"#":"delete"},"value":{"<-":"@owner.todo.label"},"detail.get(\'todo\')":{"<-":"@owner.todo"},"disabled":{"<-":"@owner.actionPending"}}}}</script></head><body><div data-montage-id=owner class=todo-item><div class=todo-item-container><div class="b-checkbox is-primary is-circular"><input data-montage-id=checkbox class=styled type=checkbox><label data-montage-id=label></label></div><div data-montage-id=delete class="button is-danger"><span class="icon is-small"><i class="fa fa-trash-o" aria-hidden=true></i></span></div></div><div class=cssload-container><div class=cssload-loading><i></i><i></i><i></i><i></i></div></div></div></body></html>'}),montageDefine("15c0bd3","ui/button.reel/button",{dependencies:["ui/control","composer/key-composer","composer/press-composer"],factory:function(e,t,n){var i=e("ui/control").Control,o=e("composer/key-composer").KeyComposer,s=e("composer/press-composer").PressComposer,a=t.Button=i.specialize({standardElementTagName:{value:"BUTTON"},hasTemplate:{value:!1},drawsFocusOnPointerActivation:{value:!0},_labelNode:{value:void 0,enumerable:!1},_label:{value:void 0,enumerable:!1},_emptyLabel:{value:"",enumerable:!1},label:{get:function(){return this._label},set:function(e){if("undefined"!=typeof e&&this.converter)try{e=this.converter.convert(e),this.error&&(this.error=null)}catch(t){this.error=t}this._label=String(e),this.isInputElement&&(this._value=e),this.needsDraw=!0}},_promise:{value:void 0},promise:{get:function(){return this._promise},set:function(e){var t=this,n=function i(){i.promise===t._promise&&(t.classList.remove("montage--pending"),t._promise=void 0)};this._promise!==e&&(this._promise=e,this._promise&&(this.classList.add("montage--pending"),n.promise=e,this._promise.then(n)))}},holdThreshold:{get:function(){return this._pressComposer.longPressThreshold},set:function(e){this._pressComposer.longPressThreshold=e}},__pressComposer:{enumerable:!1,value:null},_pressComposer:{enumerable:!1,get:function(){return this.__pressComposer||(this.__pressComposer=new s,this.addComposer(this.__pressComposer)),this.__pressComposer}},__spaceKeyComposer:{value:null},_spaceKeyComposer:{get:function(){return this.__spaceKeyComposer||(this.__spaceKeyComposer=o.createKey(this,"space","space")),this.__spaceKeyComposer}},_enterKeyComposer:{get:function(){return this.__enterKeyComposer||(this.__enterKeyComposer=o.createKey(this,"enter","enter")),this.__enterKeyComposer}},prepareForActivationEvents:{value:function(){this._pressComposer.addEventListener("pressStart",this,!1),this._spaceKeyComposer.addEventListener("keyPress",this,!1),this._enterKeyComposer.addEventListener("keyPress",this,!1)}},handleKeyPress:{value:function(e){"space"!==e._event.identifier&&"enter"!==e._event.identifier||(this.active=!1,this._dispatchActionEvent())}},addEventListener:{value:function(e,t,n){i.prototype.addEventListener.call(this,e,t,n),"longAction"===e&&this._pressComposer.addEventListener("longPress",this,!1)}},_addEventListeners:{value:function(){this._pressComposer.addEventListener("press",this,!1),this._pressComposer.addEventListener("pressCancel",this,!1),this._pressComposer.addEventListener("longPress",this,!1)}},_removeEventListeners:{value:function(){this._pressComposer.removeEventListener("press",this,!1),this._pressComposer.removeEventListener("pressCancel",this,!1),this._pressComposer.removeEventListener("longPress",this,!1)}},handlePressStart:{value:function(e){this._promise||(this.active=!0,this._addEventListeners())}},handlePress:{value:function(e){this._promise||(this.active=!1,this._dispatchActionEvent(),this._removeEventListeners())}},handleLongPress:{value:function(e){if(!this._promise){this._pressComposer.cancelPress(),this._removeEventListeners();var t=document.createEvent("CustomEvent");t.initCustomEvent("longAction",!0,!0,null),this.dispatchEvent(t)}}},handlePressCancel:{value:function(e){this.active=!1,this._removeEventListeners()}},_isInputElement:{value:void 0,enumerable:!1},isInputElement:{get:function(){return void 0!==this._isInputElement?this._isInputElement:this._isInputElement=!!this.element&&"INPUT"===this.element.tagName},enumerable:!1},enterDocument:{value:function(e){i.prototype.enterDocument&&i.prototype.enterDocument.apply(this,arguments),e&&(this.isInputElement?(Object.defineProperty(this,"value",{get:function(){return this._label},set:function(e){this.label=e}}),void 0===this._label&&(this.label=this.originalElement.value)):(this.originalElement===this.element&&void 0===this._label&&(this._label=this.originalElement.data),this.element.firstChild||this.element.appendChild(document.createTextNode("")),this._labelNode=this.element.firstChild),this.element.setAttribute("role","button"),this.element.addEventListener("keyup",this,!1))}},_drawLabel:{enumerable:!1,value:function(e){"string"!=typeof e&&(e=this._emptyLabel),this.isInputElement?this._element.value=e:this._labelNode&&(this._labelNode.data=e)}},draw:{value:function(){this["super"](),this._drawLabel(this._label)}}});a.addAttributes({formaction:null,formenctype:null,formmethod:null,formnovalidate:{dataType:"boolean"},formtarget:null,type:{value:"button"},name:null,value:null})}}),montageDefine("15c0bd3","ui/control",{dependencies:["ui/component","core/deprecate","collections/map"],factory:function(e,t,n){var i=e("ui/component").Component,o=(e("core/deprecate"),e("collections/map")),s=t.Control=i.specialize({constructor:{value:function(){this.defineBindings({"classList.has('montage--disabled')":{"<-":"disabled"},"classList.has('montage--active')":{"<-":"active"}})}},dispatchActionEvent:{value:function(){return this.dispatchEvent(this.createActionEvent())}},actionCompletionPromise:{value:void 0},_detail:{value:null},detail:{get:function(){return null!==this._detail&&void 0!==this._detail||(this._detail=new o),this._detail}},createActionEvent:{value:function(){var e,t=document.createEvent("CustomEvent");return e=this._detail,t.initCustomEvent("action",!0,!0,e),t}},hasTemplate:{get:function(){return!this.hasStandardElement}},standardElementTagName:{value:"INPUT"},_hasStandardElement:{value:null},hasStandardElement:{get:function(){return"boolean"==typeof this._hasStandardElement?this._hasStandardElement:this._hasStandardElement=this.element.tagName===this.standardElementTagName}},prepareForActivationEvents:{value:function(){this.element.addEventListener("focus",this,!1),this.element.addEventListener("blur",this,!1)}},active:{value:!1},enabled:{get:function(){return!this.disabled},set:function(e){"boolean"==typeof e&&(this.disabled=!e)}},_focusBlur:{value:void 0},focus:{value:function(){this._focusBlur=1,this.needsDraw=!0,this.preparedForActivationEvents||this._prepareForActivationEvents()}},blur:{value:function(){this._focusBlur=0,this.needsDraw=!0}},hasFocus:{
enumerable:!1,value:!1},_elementNeedsTabIndexRegex:{value:/INPUT|TEXTAREA|A|SELECT|BUTTON|LABEL/},_elementNeedsTabIndex:{value:function(){return null===this.element.tagName.match(this._elementNeedsTabIndexRegex)}},draw:{value:function(){this._elementNeedsTabIndex()&&(this._preventFocus?this.element.removeAttribute("tabindex"):this.element.setAttribute("tabindex","0")),1===this._focusBlur?this._element.focus():0!==this._focusBlur&&this.drawsFocusOnPointerActivation||this._element.blur(),this._focusBlur=void 0}},acceptsActiveTarget:{get:function(){var e=this.callDelegateMethod("shouldBeginEditing",this);return e!==!1}},willBecomeActiveTarget:{value:function(e){this.hasFocus=!0,this.callDelegateMethod("didBeginEditing",this)}},surrendersActiveTarget:{value:function(e){var t=this.callDelegateMethod("shouldEndEditing",this);return t!==!1&&(this.hasFocus=!1,this.callDelegateMethod("didEndEditing",this),!0)}},_preventFocus:{enumerable:!1,value:!1},preventFocus:{get:function(){return this._preventFocus},set:function(e){this._preventFocus=!!e,this.needsDraw=!0}},drawsFocusOnPointerActivation:{value:!1},handleFocus:{enumerable:!1,value:function(e){this.hasFocus=!0,this.drawsFocusOnPointerActivation=!0}},handleBlur:{enumerable:!1,value:function(e){this.hasFocus=!1,this.drawsFocusOnPointerActivation=!1,this.callDelegateMethod("didEndEditing",this),this.dispatchActionEvent()}},_value:{value:null},elementValue:{get:function(){return this.element.value}},value:{get:function(){return this._value},set:function(e,t){if(e!==this._value){var n;if(!this.delegate||void 0===(n=this.callDelegateMethod("shouldAcceptValue",this,e))||n){if(this.converter){var i;try{i=this.converter.revert(e),this.error=null,this._value=i}catch(o){this._value=e,this.error=""!==e&&void 0!==e&&null!==e?o:null}}else this._value=e,this.error=null;this.callDelegateMethod("didChange",this),this._elementAttributeValues.value=e,this.needsDraw=!0}}}},converter:{value:null},_error:{value:null},error:{get:function(){return this._error},set:function(e){this._error=e,this.errorMessage=this._error?this._error.message:null,this.needsDraw=!0}},_errorMessage:{value:null},errorMessage:{get:function(){return this._errorMessage},set:function(e){this._errorMessage=e}},takeValueFromElement:{value:function(){this.value=this.elementValue}},isContinuous:{value:!1}});s.addAttributes({autofocus:{value:!1,dataType:"boolean"},disabled:{value:!1,dataType:"boolean"},form:null,name:null,readonly:{value:!1,dataType:"boolean"}})}}),montageDefine("a5e4c02","ui/main.reel/main.html",{text:'<!DOCTYPE html><html><head><meta http-equiv=content-type content="text/html; charset=utf-8"><style>.Main{height:100%;width:100%}.Main,.main-content{display:flex;flex-direction:column}.main-content{background-color:#F8F8F8;position:absolute;bottom:0;top:0;left:0;right:0}.button.is-white:hover,.button.is-white.is-hovered{background-color:transparent!important}.subsitution{flex:1;position:relative}.about-container{overflow:auto;position:absolute;bottom:0;top:0;left:0;right:0}.about{padding:12px;text-align:center}.about .title{padding:8px 12px}</style><script type=text/montage-serialization>{"owner":{"values":{"element":{"#":"main"}}},"menu":{"prototype":"ui/menu.reel","values":{"element":{"#":"menu"}}},"header":{"prototype":"ui/header.reel","values":{"element":{"#":"header"}}},"todoList":{"prototype":"ui/todo-list.reel","values":{"element":{"#":"todo-list"}}},"substitution":{"prototype":"montage/ui/substitution.reel","values":{"element":{"#":"sub"},"switchValue":{"<-":"@owner.application.selectedMenu"}}},"footer":{"prototype":"ui/footer.reel","values":{"element":{"#":"footer"}}}}</script></head><body><div data-montage-id=main data-montage-skin=light class=Main><div data-montage-id=menu></div><div data-montage-id=header></div><section data-montage-id=sub class=subsitution><div class=main-content data-arg=todos><div data-montage-id=footer></div><div data-montage-id=todo-list></div></div><div class=about-container data-arg=about><div class=about><h3 class="title is-5">Todo BlackBerry Dynamics Demo</h3><h5 class="subtitle is-6">By Kaazing</h5><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer sem odio, tempor id quam ut, blandit rutrum odio. Praesent feugiat orci nec condimentum tincidunt. Vivamus et molestie enim. Etiam at mollis mauris, imperdiet aliquam arcu. Proin et posuere lorem, sed fermentum purus. Fusce sit amet neque eget enim sollicitudin scelerisque vel non nunc. Vestibulum sed varius arcu. Fusce ac eleifend metus, ac sollicitudin purus. Integer eget risus venenatis, vulputate velit sit amet, accumsan purus. Vestibulum porta urna sit amet ex congue pretium. Mauris sed lectus blandit, vulputate mauris vel, interdum ligula. Sed pulvinar molestie ultricies. Quisque vitae nisl et risus imperdiet dapibus id sed dolor.</p><p>Donec feugiat at arcu et scelerisque. Donec commodo, dolor id fringilla viverra, nunc ipsum interdum orci, sit amet mattis neque tortor nec quam. Sed vestibulum sapien ipsum, vitae lacinia velit laoreet quis. Ut laoreet mollis urna, et consectetur nisl euismod id. Nam nulla urna, imperdiet quis tortor eu, pellentesque hendrerit dolor. Proin pretium leo eu ornare sagittis. Nam porttitor elit ante, sit amet lacinia tellus hendrerit vitae. Mauris quis pellentesque ante, in blandit nisl.</p><p>Praesent quis tincidunt sapien. Sed commodo lorem in volutpat vulputate. Sed congue feugiat nisi, eu rhoncus leo pretium vel. Suspendisse potenti. Etiam eu placerat lectus, sit amet sollicitudin felis. Maecenas efficitur pulvinar tellus, at congue lectus placerat ac. Nullam libero ex, scelerisque nec nunc facilisis, scelerisque efficitur dolor. Donec sagittis velit ac blandit elementum. Cras dictum aliquet porta.</p></div></div></section></div></body></html>'}),montageDefine("15c0bd3","ui/substitution.reel/substitution",{dependencies:["../slot.reel","../../core/promise","../../core/logger"],factory:function(e,t,n){var i=e("../slot.reel").Slot,o=e("../../core/promise").Promise;e("../../core/logger").logger("substitution"),t.Substitution=i.specialize({hasTemplate:{enumerable:!1,value:!1},constructor:{value:function(){this._switchElements=Object.create(null),this._switchComponents=Object.create(null),this._switchComponentTreeLoaded=Object.create(null)}},_allChildComponents:{value:null},deserializedFromTemplate:{value:function(){this._allChildComponents=this.childComponents.slice(0),this.switchValue&&this._loadSwitchComponentTree(this.switchValue)}},_switchElements:{value:null},_switchComponentTreeLoaded:{value:null},addSwitchElement:{value:function(e,t){if(t.parentNode)throw new Error("Can't handle elements inside the DOM.");this._switchElements[e]=t,this._switchComponents[e]=t.component,this._findFringeComponents(t,this._allChildComponents)}},_findFringeComponents:{value:function(e,t){var n;if(t=t||[],e.component)t.push(e.component);else{n=e.children;for(var i,o=0;i=n[o];o++)this._findFringeComponents(i,t)}return t}},_drawnSwitchValue:{value:null},_switchValue:{value:null},switchValue:{get:function(){return this._switchValue},set:function(e){this._switchValue===e||this._isSwitchingContent||(this._switchValue=e,this._firstDraw||this.isDeserializing||this._loadContent(e))}},enterDocument:{value:function(e){var t;if(i.prototype.enterDocument.apply(this,arguments),e){t=this.getDomArgumentNames();for(var n,o=0;n=t[o];o++)this._switchElements[n]=this.extractDomArgument(n),this._switchComponents[n]=this._switchElements[n].component;this._loadContent(this.switchValue),this._updateComponentDom()}}},_loadContent:{value:function(e){var t=typeof e;this.content=this._switchElements[e]||null,"string"!==t&&"number"!==t||this._switchComponentTreeLoaded[e]||this._loadSwitchComponentTree(e)}},contentDidChange:{value:function(e,t){i.prototype.contentDidChange.call(this,e,t),this._drawnSwitchValue&&this._switchComponents[this._drawnSwitchValue]&&(this._switchElements[this._drawnSwitchValue]=this._switchComponents[this._drawnSwitchValue].element),this._drawnSwitchValue=this._switchValue}},_loadSwitchComponentTree:{value:function(e){var t,n,i=this,s=this._allChildComponents,a=this._switchElements[e],r=this.element,l=this.canDrawGate,d=[];a||(a=this._getSubstitutionDomArgument(e));for(var h=0;h<s.length;h++){for(t=s[h],n=t.element;n!==a&&n!==r&&n.parentNode;)n=n.parentNode;n===a&&d.push(t.loadComponentTree())}d.length>0?(l.setField(e+"ComponentTreeLoaded",!1),o.all(d).then(function(){i._switchComponentTreeLoaded[e]=!0,l.setField(e+"ComponentTreeLoaded",!0),i._canDraw=!0,i.needsDraw=!0})):(this._switchComponentTreeLoaded[e]=!0,this.needsDraw=!0)}},_getSubstitutionDomArgument:{value:function(e){var t,n,i,o,s,a,r=this._ownerDocumentPart.template;i=this.element,t=i.querySelectorAll("*["+this.DOM_ARG_ATTRIBUTE+"='"+e+"']");e:for(var l,d=0;l=t[d];d++){for(n=l;(n=n.parentNode)!==i;)if(o=r.getElementId(n),o&&(s=r.getSerialization(),a=s.getSerializationLabelsWithElements(o),a.length>0))continue e;return l}}},shouldLoadComponentTree:{value:!1},transition:{value:null}})}}),montageDefine("15c0bd3","composer/key-composer",{dependencies:["../core/core","./composer"],factory:function(e,t,n){var i=e("../core/core").Montage,o=e("./composer").Composer,s=null,a=i.specialize({_defaultKeyManager:{value:null},_loadingDefaultKeyManager:{value:!1},_keysToRegister:{value:[]},registerKey:{value:function(t){var n=this;this._defaultKeyManager?this._defaultKeyManager.registerKey(t):(this._keysToRegister.push(t),this._loadingDefaultKeyManager||(this._loadingDefaultKeyManager=!0,e.async("core/event/key-manager").then(function(e){var t=n._defaultKeyManager=e.defaultKeyManager;n._keysToRegister.forEach(function(e){t.registerKey(e)}),n._keysToRegister.length=0})))}},unregisterKey:{value:function(e){this._defaultKeyManager&&this._defaultKeyManager.unregisterKey(e)}}},{defaultKeyManager:{get:function(){return s||(s=new a),this._defaultKeyManager?this._defaultKeyManager:s}}}),r="keyPress",l="longKeyPress",d="keyRelease",h=t.KeyComposer=o.specialize({_shouldDispatchEvent:{value:!1},shouldDispatchLongPress:{value:!1},_longPressTimeout:{value:null},_keyRegistered:{value:!1},_keys:{value:null},keys:{get:function(){return this._keys},set:function(e){this._keyRegistered?(a.defaultKeyManager.unregisterKey(this),this._keys=e,a.defaultKeyManager.registerKey(this)):this._keys=e}},load:{value:function(){this._shouldDispatchEvent&&!this._keyRegistered&&(a.defaultKeyManager.registerKey(this),this._keyRegistered=!0)}},unload:{value:function(){a.defaultKeyManager.unregisterKey(this),this._keyRegistered=!1}},addEventListener:{value:function(e,t,n){var i=this.component;o.prototype.addEventListener.call(this,e,t,n),e!==r&&e!==l&&e!==d||(this._shouldDispatchEvent=!0,e===l&&(this._shouldDispatchLongPress=!0),this._isLoaded?this._keyRegistered||(a.defaultKeyManager.registerKey(this),this._keyRegistered=!0):i&&"function"!=typeof i.addComposer&&(this.element||(this.element=window),this.component.loadComposer(this)))}},deserializedFromTemplate:{value:function(){var e=this.component;null===this.identifier&&(this.identifier=i.getInfoForObject(this).label),e&&("function"==typeof e.addComposer?e.addComposer(this):this._isLoaded||(this.element||(this.element=window),this.component.loadComposer(this)))}}},{createKey:{value:function(e,t,n){var i=this;return this===h&&(i=new h),n||(n=e.identifier?e.identifier+t.toLowerCase().replace(/[ +]/g).toCapitalized():t.toLowerCase().replace(/[ +]/g)),i.keys=t,i.identifier=n,e.addComposer(i),i}},createGlobalKey:{value:function(e,t,n){var i=this;return this===h&&(i=new h),i.keys=t,i.identifier=n,e.addComposerForElement(i,window),i}}})}}),montageDefine("15c0bd3","ui/check-control",{dependencies:["ui/control","composer/press-composer"],factory:function(e,t,n){var i=e("ui/control").Control,o=e("composer/press-composer").PressComposer;t.CheckControl=i.specialize({constructor:{value:function(){this.defineBindings({"classList.has('montage--checked')":{"<-":"checked"}});var e="classList.has('",t={};e+=this.checkedClassName,e+="')",t[e]={"<-":"checked"},this.defineBindings(t)}},draw:{value:function(){this["super"](),this._element.setAttribute("aria-checked",this._checked)}},_pressComposer:{enumerable:!1,value:null},prepareForActivationEvents:{value:function(){var e=this._pressComposer=new o;this.addComposer(e),e.addEventListener("pressStart",this,!1),e.addEventListener("press",this,!1),e.addEventListener("cancel",this,!1),this._element.addEventListener("change",this)}},toggleChecked:{value:function(){this.disabled||(this.checked=!this.checked,this.dispatchActionEvent())}},_fakeCheck:{enumerable:!1,value:function(){var e;this._element.checked=!this._element.checked,e=document.createEvent("HTMLEvents"),e.initEvent("change",!0,!0),this._element.dispatchEvent(e)}},_shouldFakeCheck:{enumerable:!1,value:!1},handlePressStart:{value:function(e){this.hasStandardElement?this._shouldFakeCheck=e.defaultPrevented:(this.active=!0,e.touch&&document.addEventListener("touchmove",this,!1))}},handlePress:{value:function(e){this._shouldFakeCheck&&(this._shouldFakeCheck=!1,this._fakeCheck()),this.hasStandardElement||(this.active=!1,this.toggleChecked())}},handlePressCancel:{value:function(){this.hasStandardElement||(this.active=!1,document.removeEventListener("touchmove",this,!1))}},handleChange:{enumerable:!1,value:function(e){this._pressComposer&&this._pressComposer.state===o.CANCELLED||(Object.getPropertyDescriptor(this,"checked").set.call(this,this.element.checked,!0),this._dispatchActionEvent())}}}),t.CheckControl.addAttributes({checked:{value:!1,dataType:"boolean"},value:{value:"on"}})}}),montageDefine("a5e4c02","ui/footer.reel/footer",{dependencies:["montage/ui/component","montage/composer/key-composer","montage/composer/press-composer","core/services/todo-service"],factory:function(e,t,n){var i=e("montage/ui/component").Component,o=e("montage/composer/key-composer").KeyComposer,s=e("montage/composer/press-composer").PressComposer;e("core/services/todo-service").TodoService,t.Footer=i.specialize({constructor:{value:function(){this._keyComposer=new o,this._keyComposer.component=this,this._keyComposer.keys="enter",this.addComposer(this._keyComposer),this._pressComposer=new s,this._pressComposer.delegate=this,this._pressComposer.lazyLoad=!1,this.addComposerForElement(this._pressComposer,document),this._pressComposer.addEventListener("press",this,!0),this.isActive=!1}},shouldComposerSurrenderPointerToComponent:{value:function(e,t,n){var i=!this.isActive||this.isActive&&"add"===n.component.identifier;return i}},prepareForActivationEvents:{value:function(){this.input.addEventListener("focus",this),this._keyComposer.addEventListener("keyPress",this,!1)}},handleFocus:{value:function(){this.isActive=!0}},handleKeyPress:{value:function(e){this._addTodoFromInput()}},capturePress:{value:function(e){this.element.contains(e.targetElement)||this._reset()}},handleAddAction:{value:function(){this._addTodoFromInput()}},_addTodoFromInput:{value:function(){if(this.input.value){var e=this;return this._addTodo(this.input.value).then(function(){e._reset()})}return this._reset(),Promise.resolve()}},_addTodo:{value:function(e){return"string"==typeof e&&e.length?this.application.dataServicePromise.then(function(t){t.addTodo({id:void 0,label:e,done:!1})}):Promise.resolve()}},_reset:{value:function(){this.input.value="",this.isActive=!1,this.input.blur()}}})}}),montageDefine("a5e4c02","ui/footer.reel/footer.html",{text:'<!DOCTYPE html><html><head><style>.footer{padding:0!important;background-color:#fff!important;border-bottom:1px solid #ECECEC;height:70px;position:absolute;top:0;left:0;right:0;box-shadow:0 1px 4px 0 #DDD}.footer .input{border:none!important;border-radius:0!important;box-shadow:none!important;height:70px}.add-button-container{display:flex;align-items:center;position:relative}.add-button::before{content:"";position:absolute;top:-18px;right:0;left:0;bottom:-18px}.input-control{flex:1}.footer .input::-webkit-input-placeholder,.footer .input,.footer .icon{color:#3273dc!important}.background{position:absolute;top:0;bottom:0;left:0;right:0;background:#ECECEC;opacity:.25;z-index:100;display:none}</style><script type=text/montage-serialization>{"owner":{"values":{"element":{"#":"owner"},"input":{"#":"input"}}},"add":{"prototype":"montage/ui/button.reel","values":{"element":{"#":"add"},"classList.has(\'hide\')":{"<-":"!@owner.isActive"}},"listeners":[{"type":"action","listener":{"@":"owner"},"capture":false}]}}</script></head><body><footer data-montage-id=owner class=footer><div class=container><div class="content has-text-centered"><div class="field has-addons"><div class="control input-control"><input data-montage-id=input class=input placeholder="Add a to-do"></div><div class="control add-button-container"><a data-montage-id=add class="button is-white add-button"><span class="icon is-medium"><i class="fa fa-plus fa-lg" aria-hidden=true></i></span></a></div></div></div></div></footer></body></html>'}),montageDefine("a5e4c02","ui/todo-item.reel/todo-item",{dependencies:["montage/ui/component","core/services/todo-service"],factory:function(e,t,n){var i=e("montage/ui/component").Component;e("core/services/todo-service").TodoService,t.TodoItem=i.specialize({actionPending:{value:!1},todo:{set:function(e){e!==this._todo&&(this._todo=e,this.needsDraw=!0)},get:function(){return this._todo}},_scheduleActionPending:{value:function(){var e=this;this._clearActionPendingIfNeeded(),this.actionPendingId=setTimeout(function(){e.actionPending=!0},50)}},_clearActionPendingIfNeeded:{value:function(){this.actionPendingId&&(clearTimeout(this.actionPendingId),this.actionPendingId=null),this.actionPending=!1}},handleCheckboxAction:{value:function(e){var t=e.detail.get("todo");if(t){var n=this;this.application.dataServicePromise.then(function(e){return n._scheduleActionPending(),e.updateTodo(t,{done:!t.done})}).then(function(e){n.todo=e})["finally"](function(){n._clearActionPendingIfNeeded()})}}},handleDeleteAction:{value:function(e){var t=e.detail.get("todo");if(t){var n=this;this.application.dataServicePromise.then(function(e){return n._scheduleActionPending(),e.deleteTodo(t)})["finally"](function(){n._clearActionPendingIfNeeded()})}}},draw:{value:function(){if(this.todo){var e="todo-item-"+this.todo.id;this.checkboxElement.setAttribute("id",e),this.labelElement.setAttribute("for",e)}}}})}}),montageDefine("15c0bd3","composer/composer",{dependencies:["../core/target","../core/event/event-manager"],factory:function(e,t,n){var i=e("../core/target").Target,o=e("../core/event/event-manager").defaultEventManager;t.Composer=i.specialize({_component:{value:null},component:{get:function(){return this._component},set:function(e){this._component=e}},_element:{value:null},element:{get:function(){return this._element},set:function(e){this._element=e}},_shawdowRoot:{value:null},shawdowRoot:{get:function(){return this._shawdowRoot||(this._shawdowRoot=o.shawdowRootFromNode(this.element)),this._shawdowRoot}},lazyLoad:{value:!0},_needsFrame:{value:!1},needsFrame:{set:function(e){this._needsFrame!==e&&(this._needsFrame=e,this._component&&e&&this._component.scheduleComposer(this))},get:function(){return this._needsFrame}},frame:{value:Function.noop},_resolveDefaults:{value:function(){this.element||null!==this.element||null===this.component||(this.element=this.component.element)}},_isLoaded:{value:!1},isLoaded:{get:function(){return this._isLoaded}},load:{value:Function.noop},unload:{value:Function.noop},deserializedFromTemplate:{value:function(){this.component&&this.component.addComposer(this)}}},{isCoordinateOutsideRadius:{value:function(e,t,n){return e*e+t*t>n*n}}})}}),montageDefine("a5e4c02","ui/header.reel/header.html",{text:'<!DOCTYPE html><html><head><style>.header{min-height:140px}.hero-body{padding:2rem 1.5rem!important}</style><script type=text/montage-serialization>{"owner":{"values":{"element":{"#":"owner"}}},"title":{"prototype":"montage/ui/text.reel","values":{"element":{"#":"title"},"value":{"<-":"@owner.application.selectedMenu == \'todos\' ? \'My todos\' : \'About\' "}}},"menu":{"prototype":"montage/ui/button.reel","values":{"element":{"#":"menu"}},"listeners":[{"type":"action","listener":{"@":"owner"},"capture":false}]}}</script></head><body><section data-montage-id=owner class="header hero is-bold is-info"><div class=hero-head><div class=container><span data-montage-id=menu class="icon is-large"><i class="fa fa-bars fa-lg" aria-hidden=true></i></span></div></div><div class=hero-body><div class=container><h1 data-montage-id=title class="title is-4"></h1></div></div></section></body></html>'}),montageDefine("15c0bd3","ui/text.reel/text",{dependencies:["../component"],factory:function(e,t,n){var i=e("../component").Component,o=t.Text=i.specialize({hasTemplate:{value:!1},_value:{value:null},value:{get:function(){return this._value},set:function(e){this._value!==e&&(this._value=e,this.needsDraw=!0)}},converter:{value:null},defaultValue:{value:""},_valueNode:{value:null},_RANGE:{value:document.createRange()},enterDocument:{value:function(e){if(e){var t=this._RANGE;t.selectNodeContents(this.element),t.deleteContents(),this._valueNode=document.createTextNode(""),t.insertNode(this._valueNode),this.element.classList.add("montage-Text")}}},draw:{value:function(){var e="undefined"!=typeof this._value&&null!==this._value?this._value:this.defaultValue;this._valueNode.data=this.converter?this.converter.convert(e):e}}});window.MontageElement&&MontageElement.define("montage-text",o,{observedAttributes:["value"]})}}),montageDefine("15c0bd3","ui/slot.reel/slot",{dependencies:["../component"],factory:function(e,t,n){var i=e("../component").Component;t.Slot=i.specialize({hasTemplate:{enumerable:!1,value:!1},delegate:{value:null},_content:{value:null},enterDocument:{value:function(e){e&&this.element.classList.add("montage-Slot")}},content:{get:function(){return this._content},set:function(e){var t,n;e&&"undefined"!=typeof e.needsDraw?(n=this._content,e.element?t=e.element:(t=document.createElement("div"),this.delegate&&"function"==typeof this.delegate.slotElementForComponent&&(t=this.delegate.slotElementForComponent(this,e,t)),e.element=t),this.domContent=t,e.needsDraw=!0):this.domContent=e,this._content=e,this.needsDraw=!0}},contentDidChange:{value:function(){this.delegate&&"function"==typeof this.delegate.slotDidSwitchContent&&this.delegate.slotDidSwitchContent(this)}}})}}),montageDefine("a5e4c02","ui/menu.reel/menu",{dependencies:["montage/ui/component","montage/composer/press-composer"],factory:function(e,t,n){var i=e("montage/ui/component").Component,o=e("montage/composer/press-composer").PressComposer;t.Menu=i.specialize({enterDocument:{value:function(e){e&&(this._pressComposer=new o,this._pressComposer.lazyLoad=!1,this.addComposerForElement(this._pressComposer,document),this._pressComposer.addEventListener("press",this,!0),this._pressComposer.delegate=this)}},shouldComposerSurrenderPointerToComponent:{value:function(e,t,n){return!this.application.isMenuShown}},capturePress:{value:function(e){this.element.contains(e.targetElement)?e.targetElement.dataset.link&&(this.application.isMenuShown=!1,this.application.selectedMenu=e.targetElement.dataset.link):this.application.isMenuShown=!1}}})}}),montageDefine("a5e4c02","ui/menu.reel/menu.html",{text:'<!DOCTYPE html><html><head><style>.menu{position:absolute;top:0;left:0;bottom:0;width:150px;background:#fff;z-index:101;border-right:1px solid #ECECEC;box-shadow:1px 0 2px 0 #8888886b;transform:translate3d(-155px,0,0);padding:8px}.menu.slide{animation:slide .15s ease-in-out 0s forwards}@keyframes slide{0%{transform:translate3d(-155px,0,0)}100%{transform:translate3d(0,0,0)}}</style><script type=text/montage-serialization>{"owner":{"values":{"element":{"#":"owner"},"classList.has(\'slide\')":{"<-":"!!@owner.application.isMenuShown"}}}}</script></head><body><aside data-montage-id=owner class=menu><p class=menu-label>Menu</p><ul class=menu-list><li><a data-link=todos>Todos</a></li><li><a data-link=about>About</a></li></ul></aside></body></html>'}),montageDefine("a5e4c02","ui/todo-list.reel/todo-list",{dependencies:["montage/ui/component"],factory:function(e,t,n){var i=e("montage/ui/component").Component;t.TodoList=i.specialize({enterDocument:{value:function(e){e&&this.fetchTodos()}},fetchTodos:{value:function(){var e=this;e.actionPending=!0,this.application.dataServicePromise.then(function(t){return t.fetchAll().then(function(t){return e.todos=t})})["finally"](function(){e.actionPending=!1})}}})}}),montageDefine("a5e4c02","ui/main.reel/main",{dependencies:["montage/ui/component"],factory:function(e,t,n){var i=e("montage/ui/component").Component;t.Main=i.specialize({constructor:{value:function(){this["super"]()}},templateDidLoad:{value:function(){this.application.selectedMenu="todos"}},draw:{value:function(){}}})}}),montageDefine("15c0bd3","ui/checkbox.reel/checkbox",{dependencies:["ui/check-control"],factory:function(e,t,n){var i=e("ui/check-control").CheckControl;t.Checkbox=i.specialize({enterDocument:{value:function(e){this["super"](e),e&&this.element.setAttribute("role","checkbox")}},hasTemplate:{value:!1}})}}),montageDefine("a5e4c02","ui/header.reel/header",{dependencies:["montage/ui/component"],factory:function(e,t,n){var i=e("montage/ui/component").Component;t.Header=i.specialize({handleMenuAction:{value:function(){this.application.isMenuShown=!0}}})}});
bundleLoaded("index.html.bundle-1-0.js")